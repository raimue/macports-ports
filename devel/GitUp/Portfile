# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem          1.0
PortGroup           github 1.0
PortGroup           xcode 1.0

github.setup        git-up GitUp 1.0.11 v
categories          devel
platforms           darwin
license             GPL-3+
maintainers         {raimue @raimue} \
                    openmaintainer

description         A graphical Git interface

long_description    GitUp is a graphical Git interface written for macOS.

checksums           rmd160  67cd77ce0e6738892afb7f2437b122931358437f \
                    sha256  f7cd49afb82ff3009c5a0bec08249951e7c7271b5e5ad58684f42bcc741658a8 \
                    size    32573000

pre-fetch {
    if {${os.platform} eq "darwin" && ${os.major} < 12} {
        ui_error "${name} only runs on Mac OS X 10.8 or greater."
        return -code error "incompatible Mac OS X version"
    }
}

# TODO:
#  * Disable Sparkle
#  * Disable command line tool installation to /usr/local/bin,
#    always install it to ${prefix}/bin

pre-build {
    file mkdir ${workpath}/Xcode/DerivedData/PrecompiledHeaders
    file mkdir ${workpath}/Xcode/DerivedData/ModuleCache
}

build.dir           ${worksrcpath}/GitUp
xcode.scheme        Application
xcode.configuration Release
xcode.build.settings \
                    "CODE_SIGN_IDENTITY=" \
                    "HOME=${worksrcpath}/.home" \
                    "SHARED_PRECOMPS_DIR=${workpath}/Xcode/DerivedData/PrecompiledHeaders" \
                    "MODULE_CACHE_DIR=${workpath}/Xcode/DerivedData/ModuleCache"

#xcode.build.settings-append -showBuildSettings
